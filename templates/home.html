{% extends "base.html" %}
{% block content %}

<style>
  /* Glassmorphism */
  .glass {
    background: rgba(255, 255, 255, 0.12);
    border: 1px solid rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.18);
    border-radius: 1rem;
  }
  .dash-bg {
    background: radial-gradient(1200px 1200px at 10% -10%, #7c4dff33, transparent 60%),
                radial-gradient(1000px 800px at 110% 10%, #00e5ff33, transparent 55%),
                linear-gradient(135deg, #0f172a, #111827 60%, #0b1020);
  }
  .btn-gradient { background: linear-gradient(135deg, #8b5cf6, #06b6d4); border: 0; color: #0b1020; font-weight: 600; }
  .btn-gradient:hover { opacity: .95; }
  .balance-card {
    background: linear-gradient(135deg, rgba(139,92,246,.25), rgba(6,182,212,.25));
    border: 1px solid rgba(255,255,255,.25);
    border-radius: 1.25rem;
  }
  .balance-amount { font-size: clamp(28px, 4.5vw, 44px); font-weight: 800; color: #fff; letter-spacing: .5px; }
  .muted { color: #cbd5e1; }
  .tile {
    transition: transform .15s ease, box-shadow .15s ease;
    border-radius: 1rem; padding: 1rem; height: 100%;
    background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.18);
  }
  .tile:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,.25); }
  .tile-icon {
    width: 42px; height: 42px; border-radius: 12px;
    display: grid; place-items: center; background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.25); color: #e5e7eb;
  }
  .section-title { color: #e5e7eb; font-weight: 700; }
  .step {
    background: rgba(255,255,255,.06);
    border: 1px dashed rgba(255,255,255,.25);
    border-radius: .9rem;
    padding: 1rem;
  }
  .badge-soft {
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.25);
    color:#e5e7eb;
  }
</style>

<div class="dash-bg min-vh-100 py-5">
  <div class="container">

    {% if current_user.is_authenticated %}
    <!-- Header -->
    <div class="d-flex flex-column flex-md-row align-items-md-end align-items-start justify-content-between mb-4">
      <div>
        <h2 class="text-white mb-1">Hoş geldin</h2>
        <div class="muted">{{ current_user.email }}</div>
      </div>
      <div class="mt-3 mt-md-0">
        <a href="{{ url_for('transfer') }}" class="btn btn-gradient btn-lg">Para Gönder</a>
      </div>
    </div>

    <!-- Balance -->
    <div class="glass balance-card p-4 p-md-5 mb-4">
      <div class="d-flex flex-wrap align-items-center justify-content-between gap-3">
        <div>
          <div class="muted mb-1">Toplam Bakiye</div>
          <div class="balance-amount">{{ "%.2f"|format(current_user.balance) }} <span class="fs-5 fw-bold">SRDS</span></div>
        </div>
        <div class="d-flex gap-2">
          <a href="{{ url_for('qr') }}" class="btn btn-outline-light">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="me-2" viewBox="0 0 16 16">
              <path d="M2 2h2v2H2V2Zm0 3h1v1H2V5Zm2 0h1v1H4V5Zm1-3h1v1H5V2Zm3 0h1v1H8V2Zm1 3h1v1H9V5Zm-1 0h1v1H8V5ZM7 2h1v1H7V2ZM2 8h1v1H2V8Zm3 0h1v1H5V8Zm-3 3h2v2H2v-2Zm3 2v-1h1v1H5Zm3 0v-1h1v1H8Zm6-11h-2v2h2V2Zm-3 0h-1v1h1V2Zm3 3h-1v1h1V5Zm-3 0h-1v1h1V5ZM2 12h1v1H2v-1Zm9-4h1v1h-1V8Zm1 2h1v1h-1v-1Zm-1 1h1v1h-1v-1Zm2 1h1v1h-1v-1Zm-4-4h1v1h-1V8Zm-1 3h1v1h-1v-1Z"/>
            </svg>
            QR Kodum
          </a>
          <a href="{{ url_for('history') }}" class="btn btn-outline-light">Geçmiş</a>
          <a href="{{ url_for('notifications') }}" class="btn btn-outline-light">Bildirimler</a>
        </div>
      </div>
    </div>

    <!-- Quick actions -->
    <h5 class="section-title mb-3">Hızlı İşlemler</h5>
    <div class="row g-3">
      <div class="col-6 col-md-3">
        <a href="{{ url_for('transfer') }}" class="text-decoration-none d-block h-100">
          <div class="tile">
            <div class="d-flex align-items-center gap-3">
              <div class="tile-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M0 7a2 2 0 0 1 2-2h8.293L7.646 2.354a.5.5 0 1 1 .708-.708l4.5 4.5a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 1 1-.708-.708L10.293 7H2A1 1 0 0 0 1 8v5.5a.5.5 0 0 1-1 0Z"/>
                </svg>
              </div>
              <div>
                <div class="text-white fw-semibold">Para Gönder</div>
                <small class="muted">QR ile de gönder</small>
              </div>
            </div>
          </div>
        </a>
      </div>

      <div class="col-6 col-md-3">
        <a href="{{ url_for('history') }}" class="text-decoration-none d-block h-100">
          <div class="tile">
            <div class="d-flex align-items-center gap-3">
              <div class="tile-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M8 3.5a.5.5 0 0 1 .5.5v4.25l3 1.8a.5.5 0 1 1-.5.866l-3.5-2.1A.5.5 0 0 1 7 8V4a.5.5 0 0 1 .5-.5Z"/>
                  <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16Zm0-1A7 7 0 1 1 8 1a7 7 0 0 1 0 14Z"/>
                </svg>
              </div>
              <div>
                <div class="text-white fw-semibold">Geçmiş</div>
                <small class="muted">Tüm transferlerin</small>
              </div>
            </div>
          </div>
        </a>
      </div>

      <div class="col-6 col-md-3">
        <a href="{{ url_for('notifications') }}" class="text-decoration-none d-block h-100">
          <div class="tile">
            <div class="d-flex align-items-center gap-3">
              <div class="tile-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M8 16a2 2 0 0 0 1.985-1.75H6.015A2 2 0 0 0 8 16Zm.104-14a2 2 0 0 1 1.996 1.85l.4 4.8 1.25 1.25a.5.5 0 0 1-.353.854H4.603a.5.5 0 0 1-.353-.854l1.25-1.25.4-4.8A2 2 0 0 1 7.896 2h.208Z"/>
                </svg>
              </div>
              <div>
                <div class="text-white fw-semibold">Bildirimler</div>
                <small class="muted">Gelen transfer mesajları</small>
              </div>
            </div>
          </div>
        </a>
      </div>

      <div class="col-6 col-md-3">
        <a href="{{ url_for('qr') }}" class="text-decoration-none d-block h-100">
          <div class="tile">
            <div class="d-flex align-items-center gap-3">
              <div class="tile-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M2 2h2v2H2V2Zm0 3h1v1H2V5Zm2 0h1v1H4V5Zm1-3h1v1H5V2Zm3 0h1v1H8V2Zm1 3h1v1H9V5Zm-1 0h1v1H8V5ZM7 2h1v1H7V2ZM2 8h1v1H2V8Zm3 0h1v1H5V8Zm-3 3h2v2H2v-2Zm3 2v-1h1v1H5Zm3 0v-1h1v1H8Zm6-11h-2v2h2V2Zm-3 0h-1v1h1V2Zm3 3h-1v1h1V5Zm-3 0h-1v1h1V5ZM2 12h1v1H2v-1Zm9-4h1v1h-1V8Zm1 2h1v1h-1v-1Zm-1 1h1v1h-1v-1Zm2 1h1v1h-1v-1Zm-4-4h1v1h-1V8Zm-1 3h1v1h-1v-1Z"/>
                </svg>
              </div>
              <div>
                <div class="text-white fw-semibold">QR Kodum</div>
                <small class="muted">E-postanı okut</small>
              </div>
            </div>
          </div>
        </a>
      </div>
    </div>

    {% else %}
    <!-- Guest view: Hero -->
    <div class="row justify-content-center mb-4">
      <div class="col-lg-10">
        <div class="glass p-4 p-md-5">
          <div class="d-flex flex-column flex-md-row align-items-center gap-4">
            <div class="text-center text-md-start">
              <h1 class="text-white fw-bold mb-2">SRDS Wallet</h1>
              <p class="muted mb-3">
                QR ile anında para gönder. Şeffaf komisyon havuzu. Güvenli oturum. Hepsi tek yerde.
              </p>
              <div class="d-flex gap-2 justify-content-center justify-content-md-start">
                <a href="{{ url_for('login') }}" class="btn btn-gradient btn-lg">Giriş Yap</a>
                <a href="{{ url_for('register') }}" class="btn btn-outline-light btn-lg">Kayıt Ol</a>
              </div>
              <div class="mt-3">
                <span class="badge badge-soft me-2">Hızlı Transfer</span>
                <span class="badge badge-soft me-2">QR Paylaşımı</span>
                <span class="badge badge-soft">Komisyon Havuzu</span>
              </div>
            </div>
            <div class="ms-md-auto w-100 w-md-50">
              <div class="balance-card p-4">
                <div class="muted mb-1">Örnek Bakiye</div>
                <div class="balance-amount">1,250.00 <span class="fs-5 fw-bold">SRDS</span></div>
                <div class="row g-2 mt-3">
                  <div class="col-6">
                    <div class="step">
                      <small class="muted d-block">Adım 1</small>
                      <div class="text-white fw-semibold">Kayıt Ol</div>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="step">
                      <small class="muted d-block">Adım 2</small>
                      <div class="text-white fw-semibold">QR Kodunu Paylaş</div>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="step">
                      <small class="muted d-block">Adım 3</small>
                      <div class="text-white fw-semibold">Para Gönder</div>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="step">
                      <small class="muted d-block">Adım 4</small>
                      <div class="text-white fw-semibold">Bildirim Al</div>
                    </div>
                  </div>
                </div>
                <small class="d-block muted mt-2">Veriler demo amaçlıdır.</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Guest view: Features -->
    <div class="row g-3">
      <div class="col-md-4">
        <div class="tile h-100">
          <div class="d-flex align-items-center gap-3 mb-2">
            <div class="tile-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M2 2h2v2H2V2Zm0 3h1v1H2V5Zm2 0h1v1H4V5Zm1-3h1v1H5V2Zm3 0h1v1H8V2Z"/>
                <path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Z"/>
              </svg>
            </div>
            <div class="text-white fw-semibold">QR ile Kolay Gönderim</div>
          </div>
          <p class="muted mb-0">Alıcı e-postasını okut. Form otomatik dolsun. Tek tıkla gönder.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="tile h-100">
          <div class="d-flex align-items-center gap-3 mb-2">
            <div class="tile-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M2 12.5a.5.5 0 0 0 .5.5H6a.5.5 0 0 0 .5-.5V10H2v2.5Z"/>
                <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3.5A1.5 1.5 0 0 1 3.5 2H10l4 2.5Z"/>
              </svg>
            </div>
            <div class="text-white fw-semibold">Güvenli Oturum</div>
          </div>
          <p class="muted mb-0">Flask-Login ile korumalı işlemler. Şifre hash’li saklanır.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="tile h-100">
          <div class="d-flex align-items-center gap-3 mb-2">
            <div class="tile-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Z"/>
                <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
              </svg>
            </div>
            <div class="text-white fw-semibold">Şeffaf Komisyon</div>
          </div>
          <p class="muted mb-0">Her transferin 1/500’i ortak havuzda toplanır. Kayıt altındadır.</p>
        </div>
      </div>
    </div>

    <!-- Guest view: CTA -->
    <div class="row justify-content-center mt-4">
      <div class="col-lg-8">
        <div class="glass p-4 d-flex flex-column flex-md-row align-items-center justify-content-between">
          <div class="mb-3 mb-md-0">
            <h5 class="text-white mb-1">Saniyeler içinde hesabını oluştur</h5>
            <div class="muted">Ücretsiz kayıt ol. Hemen SRDS gönderip al.</div>
          </div>
          <div class="d-flex gap-2">
            <a href="{{ url_for('register') }}" class="btn btn-gradient btn-lg">Kayıt Ol</a>
            <a href="{{ url_for('login') }}" class="btn btn-outline-light btn-lg">Giriş Yap</a>
          </div>
        </div>
      </div>
    </div>
    {% endif %}

  </div>
</div>
{% endblock %}
